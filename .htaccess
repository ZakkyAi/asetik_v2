<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Set base directory (adjust if needed)
    RewriteBase /asetik_v2/
    
    # Allow direct access to static files (images, css, js, etc)
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteCond %{REQUEST_URI} \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|eot|webp|mp4|pdf|zip)$ [NC]
    RewriteRule ^ - [L]
    
    # Allow direct access to uploads directory
    RewriteCond %{REQUEST_URI} ^/asetik_v2/public/uploads/
    RewriteRule ^ - [L]
    
    # Allow direct access to assets directory
    RewriteCond %{REQUEST_URI} ^/asetik_v2/public/assets/
    RewriteRule ^ - [L]
    
    # Allow specific test files (remove in production)
    RewriteCond %{REQUEST_URI} ^/asetik_v2/test_mysql\.php$ [OR]
    RewriteCond %{REQUEST_URI} ^/asetik_v2/test_db\.php$ [OR]
    RewriteCond %{REQUEST_URI} ^/asetik_v2/router-test\.php$ [OR]
    RewriteCond %{REQUEST_URI} ^/asetik_v2/test-all-routes\.php$
    RewriteRule ^ - [L]
    
    # Block direct access to all other PHP files in public/modules
    RewriteCond %{REQUEST_URI} ^/asetik_v2/public/modules/.*\.php$ [OR]
    RewriteCond %{REQUEST_URI} ^/asetik_v2/modules/.*\.php$ [OR]
    RewriteCond %{REQUEST_URI} ^/asetik_v2/public/.*\.php$ [OR]
    RewriteCond %{REQUEST_URI} ^/asetik_v2/approve\.php$
    RewriteRule ^ index.php [L]
    
    # Route all other requests through index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^ index.php [L]
</IfModule>

# Disable directory listing
Options -Indexes

# Set default index files
DirectoryIndex index.php index.html

# Enable error documents
ErrorDocument 404 /asetik_v2/index.php
ErrorDocument 403 /asetik_v2/index.php
